{"version":3,"sources":["../src/script_config_point_view.js"],"names":["define","$","ajax","notification","init","sectionid","envconf","courseId","courseid","contextId","contextid","ajaxPromises","call","methodname","args","fail","exception","when","done","ajaxResult0","ajaxResult1","ajaxResult2","sectionids","types","moduleids","ids","trackcolor","click","removeClass","addClass","manageButtonGroup","forEach","type","checkedType","length","manageButtonSection","checkedBoxGroup","treatEnableForm","event","data","id","prop","treatDisableForm","manageButton","is","selectChange","value","parseInt","difficulty","greentrack","bluetrack","redtrack","blacktrack","module","css","checkConf","moduleId","typeParam","window","location","classList","attr","classes","split","className","indexOf","search","match","val","idConfigDifficulty","change","func","userid","cmid","vote"],"mappings":"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","sourcesContent":["define(['jquery', 'core/ajax', 'core/notification'], function($, ajax, notification) {\n    return {\n        init: function(sectionid, envconf) {\n\n            var courseId = envconf.courseid;\n\n            var contextId = envconf.contextid;\n\n            var ajaxPromises = ajax.call([\n                {\n                    methodname: 'block_point_view_get_section_range',\n                    args: {\n                        sectionid: sectionid,\n                    },\n                    fail: notification.exception\n                },\n                {\n                    methodname: 'block_point_view_get_course_data',\n                    args: {\n                        courseid: courseId,\n                        contextid: contextId\n                    },\n                    fail: notification.exception\n                },\n                {\n                    methodname: 'block_point_view_get_track_colors',\n                    args: {},\n                    fail: notification.exception\n                }\n            ]);\n\n            $.when(ajaxPromises[0], ajaxPromises[1], ajaxPromises[2])\n                .done(function(ajaxResult0, ajaxResult1, ajaxResult2) {\n\n                    var sectionids = ajaxResult0;\n\n                    var types = ajaxResult1.types;\n\n                    var moduleids = ajaxResult1.ids;\n\n                    var trackcolor = ajaxResult2;\n\n                    /* Shortcut to the \"SAVE\" button at the bottom of the page */\n                    $('#id_go_to_save').click(function() {\n                        $('#id_submitbutton').click();\n                    }).removeClass('btn-secondary').addClass('btn-primary');\n\n                    /**\n                     * Management of the Enable/Disable all types button\n                     */\n                    function manageButtonGroup() {\n                        types.forEach(function(type) {\n                            var checkedType = $('.' + type + ':checkbox:checked').length;\n                            if (checkedType === $('.' + type + ':checkbox').length) {\n                                $('#id_enableall' + type).addClass('active');\n                                $('#id_disableall' + type).removeClass('active');\n                            } else if (checkedType === 0) {\n                                $('#id_disableall' + type).addClass('active');\n                                $('#id_enableall' + type).removeClass('active');\n                            } else {\n                                $('#id_enableall' + type).removeClass('active');\n                                $('#id_disableall' + type).removeClass('active');\n                            }\n                        });\n                    }\n\n                    /**\n                     * Management of the Enable/Disable all section button\n                     */\n                    function manageButtonSection() {\n                        sectionids.forEach(function(sectionid) {\n                            var checkedBoxGroup = $('.checkboxgroup' + sectionid + ':checkbox:checked').length;\n                            if (checkedBoxGroup === $('.checkboxgroup' + sectionid + ':checkbox').length) {\n                                $('#id_enable_' + sectionid).addClass('active');\n                                $('#id_disable_' + sectionid).removeClass('active');\n                            } else if (checkedBoxGroup === 0) {\n                                $('#id_disable_' + sectionid).addClass('active');\n                                $('#id_enable_' + sectionid).removeClass('active');\n                            } else {\n                                $('#id_disable_' + sectionid).removeClass('active');\n                                $('#id_enable_' + sectionid).removeClass('active');\n                            }\n                        });\n                    }\n\n                    /**\n                     * Enable all activities in the section\n                     * @param {array} event\n                     */\n                    function treatEnableForm(event) {\n                        $('.check_section_' + event.data.id).prop('checked', true);\n                        $(this).addClass('active');\n                        $('#id_disable_' + event.data.id).removeClass('active');\n                        /* Update the buttons state */\n                        manageButtonGroup();\n                    }\n\n                    /**\n                     * Disable all activities in the section\n                     * @param {array} event\n                     */\n                    function treatDisableForm(event) {\n                        $('.check_section_' + event.data.id).prop('checked', false);\n                        $(this).addClass('active');\n                        $('#id_enable_' + event.data.id).removeClass('active');\n                        /* Update the buttons state */\n                        manageButtonGroup();\n                    }\n\n                    /**\n                     * Manage enable/disable all button\n                     * @param {array} event\n                     */\n                    function manageButton(event) {\n                        if (!$(this).is(':checked')) {\n                            $('#id_enable_' + event.data.id).removeClass('active');\n                            $('#id_enableall' + event.data.type).removeClass('active');\n                        } else {\n                            $('#id_disable_' + event.data.id).removeClass('active');\n                            $('#id_disableall' + event.data.type).removeClass('active');\n                        }\n\n                        var checkedBoxGroup = $('.checkboxgroup' + event.data.id + ':checkbox:checked').length;\n                        if (checkedBoxGroup === $('.checkboxgroup' + event.data.id + ':checkbox').length) {\n                            $('#id_enable_' + event.data.id).addClass('active');\n                        } else if (checkedBoxGroup === 0) {\n                            $('#id_disable_' + event.data.id).addClass('active');\n                        }\n\n                        var checkedType = $('.' + event.data.type + ':checkbox:checked').length;\n                        if (checkedType === $('.' + event.data.type + ':checkbox').length) {\n                            $('#id_enableall' + event.data.type).addClass('active');\n                        } else if (checkedType === 0) {\n                            $('#id_disableall' + event.data.type).addClass('active');\n                        }\n                    }\n\n                    /**\n                     * Event when one select list has changed\n                     * @param {array} event\n                     */\n                    function selectChange(event) {\n                        var value;\n                        if (this.value !== undefined) {\n                            value = parseInt(this.value);\n                        } else {\n                            value = event.data.value;\n                        }\n\n                        if (value !== 0) {\n                            var difficulty;\n                            switch (value) {\n                                case 1:\n                                    difficulty = trackcolor.greentrack;\n                                    break;\n                                case 2:\n                                    difficulty = trackcolor.bluetrack;\n                                    break;\n                                case 3:\n                                    difficulty = trackcolor.redtrack;\n                                    break;\n                                case 4:\n                                    difficulty = trackcolor.blacktrack;\n                                    break;\n                            }\n\n                            (event.data.module).css({\n                                'background-color': difficulty,\n                                'color': 'white'\n                            });\n                        } else {\n                            (event.data.module).css({\n                                'background-color': '',\n                                'color': ''\n                            });\n                        }\n                    }\n\n                    /**\n                     * Manage button state to be interactive\n                     */\n                    function checkConf() {\n                        if ($('#id_config_enable_point_views_checkbox').is(':checked')\n                            || $('#id_config_enable_difficulties_checkbox').is(':checked')) {\n                            $('#id_activities').css({'display': ''});\n                        } else {\n                            $('#id_activities').css({'display': 'none'});\n                        }\n\n                        if ($('#id_config_enable_difficulties_checkbox').is(':checked')) {\n                            moduleids.forEach(function(moduleId) {\n                                $('#id_config_difficulty_' + moduleId).css({'display': ''});\n                            });\n                        } else {\n                            moduleids.forEach(function(moduleId) {\n                                $('#id_config_difficulty_' + moduleId).css({'display': 'none'});\n                            });\n                        }\n\n                        if ($('#id_config_enable_point_views_checkbox').is(':checked')) {\n                            $('#id_config_images').css({'display': ''});\n                            moduleids.forEach(function(moduleId) {\n                                $('#id_config_moduleselectm' + moduleId).css({'display': ''});\n                            });\n                            types.forEach(function(typeParam) {\n                                $('div[data-groupname=\"' + typeParam + '_group_type\"]').css({'display': ''});\n                            });\n                            sectionids.forEach(function(sectionid) {\n                                $('#id_enable_' + sectionid).css({'display': ''});\n                                $('#id_disable_' + sectionid).css({'display': ''});\n                            });\n                        } else {\n                            $('#id_config_images').css({'display': 'none'});\n                            moduleids.forEach(function(moduleId) {\n                                $('#id_config_moduleselectm' + moduleId).css({'display': 'none'});\n                            });\n                            types.forEach(function(typeParam) {\n                                $('div[data-groupname=\"' + typeParam + '_group_type\"]').css({'display': 'none'});\n                            });\n                            sectionids.forEach(function(sectionid) {\n                                $('#id_enable_' + sectionid).css({'display': 'none'});\n                                $('#id_disable_' + sectionid).css({'display': 'none'});\n                            });\n                        }\n                    }\n\n                    $('#id_close_field').click(function() {\n                        $('#id_activities').addClass('collapsed');\n                        window.location = '#maincontent';\n                    });\n\n                    /* Listen a checkbox state change */\n                    moduleids.forEach(function(moduleId) {\n                        var classList = $('#id_config_moduleselectm' + moduleId).attr('class');\n                        if (classList !== undefined) {\n                            var classes = classList.split(' ');\n                            var type = null;\n                            var id = null;\n                            classes.forEach(function(className) {\n                                if (types.indexOf(className) !== -1) {\n                                    type = types[types.indexOf(className)];\n                                }\n                                if (className.search('check_section_') !== -1) {\n                                    id = className.match(/\\d+/);\n                                }\n                            });\n\n                            $('#id_config_moduleselectm' + moduleId).click({id: id, type: type}, manageButton);\n                        }\n\n                        var value = parseInt($('#id_config_difficulty_' + moduleId + ' :selected').val());\n                        var idConfigDifficulty = $('#id_config_difficulty_' + moduleId);\n\n                        selectChange({data: {value: value, module: idConfigDifficulty}});\n\n                        idConfigDifficulty.change({module: idConfigDifficulty}, selectChange);\n                    });\n\n                    /* Button state at the loading */\n                    sectionids.forEach(function(sectionid) {\n                        $('#id_enable_' + sectionid).click({id: sectionid}, treatEnableForm)\n                            .removeClass('btn-secondary').addClass('btn-outline-success');\n                        $('#id_disable_' + sectionid).click({id: sectionid}, treatDisableForm)\n                            .removeClass('btn-secondary').addClass('btn-outline-danger');\n                        $('div[data-groupname=\"manage_checkbox_' + sectionid + '\"] .pull-xs-right').css({'padding-top': '20px'});\n                        $('div[data-groupname=\"manage_checkbox_' + sectionid + '\"] .float-sm-right').css({'padding-top': '20px'});\n                    });\n\n                    manageButtonSection();\n\n                    types.forEach(function(type) {\n                        $('#id_enableall' + type).click(function() {\n                            /* Check all checkbox of $type */\n                            $('input.' + type).prop('checked', true);\n                            /* Make the button darker without disable it */\n                            $(this).addClass('active');\n                            /* And reset the other one to see that this one was cliked */\n                            $('#id_disableall' + type).removeClass('active');\n                            manageButtonSection();\n                        }).removeClass('btn-secondary').addClass('btn-outline-success');\n\n                        $('#id_disableall' + type).click(function() {\n                            $('input.' + type).prop('checked', false);\n                            $(this).addClass('active');\n                            $('#id_enableall' + type).removeClass('active');\n                            manageButtonSection();\n                        }).removeClass('btn-secondary').addClass('btn-outline-danger');\n                        manageButtonGroup();\n                    });\n\n                    /* Reset images button  */\n                    $('#id_config_reset_pix')\n                        .removeClass('btn-secondary')\n                        .addClass('btn-outline-warning')\n                        .click(function() {\n                            $('#id_config_enable_pix_checkbox:checked').prop('checked', false);\n                            $('#id_submitbutton').click();\n                        });\n\n                    /* Hide fieldsets if Reactions or Difficulties checkboxes are disabled */\n                    checkConf();\n\n                    $('#id_config_enable_point_views_checkbox').click(checkConf);\n                    $('#id_config_enable_difficulties_checkbox').click(checkConf);\n\n                    $('div[data-groupname=\"config_reset_confirm\"]').css({'display': 'none'});\n\n                    /* Reset vote */\n                    $('#id_config_reset_yes')\n                        .removeClass('btn-secondary')\n                        .addClass('btn-success')\n                        .click(function() {\n                            /* AJAX call to the PHP function which reset DB */\n                            ajax.call([\n                                {\n                                    methodname: 'block_point_view_update_db',\n                                    args: {\n                                        func: 'reset',\n                                        userid: 0, /* Can't be set to null */\n                                        courseid: courseId,\n                                        cmid: 0, /* Can't be set to null */\n                                        vote: 0 /* Can't be set to null */\n                                    },\n                                    done: (function() {\n                                        $('#id_submitbutton').click();\n                                    }),\n                                fail: notification.exception\n                                }\n                            ]);\n                        });\n\n                    $('#id_config_reset_no')\n                        .removeClass('btn-secondary')\n                        .addClass('btn-danger')\n                        .click(function() {\n                            $('div[data-groupname=\"config_reset_confirm\"]').css({'display': 'none'});\n                        });\n\n                    $('#id_config_reaction_reset_button')\n                        .removeClass('btn-secondary')\n                        .addClass('btn-outline-warning')\n                        .click(function() {\n                            $('div[data-groupname=\"config_reset_confirm\"]').css({'display': ''});\n                        });\n                });\n        }\n    };\n});"],"file":"script_config_point_view.min.js"}