{"version":3,"sources":["../src/script_menu_point_view.js"],"names":["define","$","ajax","notification","init","envconf","userId","parseInt","userid","courseId","courseid","ajaxPromises","call","methodname","args","fail","exception","when","done","ajaxResult0","moduleIds","forEach","element","push","cmid","openRow","rowDetails","event","data","id","css","html","click","index","text","intDisplay","mouseout"],"mappings":"AACAA,OAAM,2CAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAAD,CAA+C,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgC,CACjF,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAkB,IAEhBC,CAAAA,CAAM,CAAGC,QAAQ,CAACF,CAAO,CAACG,MAAT,CAFD,CAIhBC,CAAQ,CAAGJ,CAAO,CAACK,QAJH,CAMhBC,CAAY,CAAGT,CAAI,CAACU,IAAL,CAAU,CACzB,CACIC,UAAU,CAAE,+BADhB,CAEIC,IAAI,CAAE,CACFN,MAAM,CAAEF,CADN,CAEFI,QAAQ,CAAED,CAFR,CAFV,CAMIM,IAAI,CAAEZ,CAAY,CAACa,SANvB,CADyB,CAAV,CANC,CAiBpBf,CAAC,CAACgB,IAAF,CAAON,CAAY,CAAC,CAAD,CAAnB,EACKO,IADL,CACU,SAASC,CAAT,CAAsB,CAExB,GAAIC,CAAAA,CAAS,CAAG,EAAhB,CACAD,CAAW,CAACE,OAAZ,CAAoB,SAASC,CAAT,CAAkB,CAClCF,CAAS,CAACG,IAAV,CAAehB,QAAQ,CAACe,CAAO,CAACE,IAAT,CAAvB,CACH,CAFD,EAIA,GAAIC,CAAAA,CAAO,CAAG,EAAd,CAOA,QAASC,CAAAA,CAAT,CAAoBC,CAApB,CAA2B,CACvB,GAAIF,CAAO,CAACE,CAAK,CAACC,IAAN,CAAWC,EAAZ,CAAX,CAA4B,CACxB5B,CAAC,CAAC,cAAgB0B,CAAK,CAACC,IAAN,CAAWC,EAA3B,CAAgC,UAAjC,CAAD,CAA8CC,GAA9C,CAAkD,CAAC,QAAW,MAAZ,CAAlD,EACA7B,CAAC,CAAC,cAAgB0B,CAAK,CAACC,IAAN,CAAWC,EAA3B,CAAgC,MAAjC,CAAD,CAA0CE,IAA1C,CAA+C,GAA/C,EACAN,CAAO,CAACE,CAAK,CAACC,IAAN,CAAWC,EAAZ,CAAP,GACH,CAJD,IAIO,CACH5B,CAAC,CAAC,cAAgB0B,CAAK,CAACC,IAAN,CAAWC,EAA3B,CAAgC,UAAjC,CAAD,CAA8CC,GAA9C,CAAkD,CAAC,QAAW,EAAZ,CAAlD,EACA7B,CAAC,CAAC,cAAgB0B,CAAK,CAACC,IAAN,CAAWC,EAA3B,CAAgC,MAAjC,CAAD,CAA0CE,IAA1C,CAA+C,GAA/C,EACAN,CAAO,CAACE,CAAK,CAACC,IAAN,CAAWC,EAAZ,CAAP,GACH,CACJ,CAED5B,CAAC,CAAC,UAAW,CAETmB,CAAS,CAACC,OAAV,CAAkB,SAASQ,CAAT,CAAa,CAC3BJ,CAAO,CAACI,CAAD,CAAP,IACA5B,CAAC,CAAC,cAAgB4B,CAAhB,CAAqB,UAAtB,CAAD,CAAmCC,GAAnC,CAAuC,CAAC,QAAW,MAAZ,CAAvC,EACA7B,CAAC,CAAC,cAAgB4B,CAAhB,CAAqB,MAAtB,CAAD,CAA+BG,KAA/B,CAAqC,CAACH,EAAE,CAAEA,CAAL,CAArC,CAA+CH,CAA/C,EAEA,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,EAAUL,OAAV,CAAkB,SAASY,CAAT,CAAgB,CAC9B,GAAmE,GAA/D,GAAAhC,CAAC,CAAC,cAAgB4B,CAAhB,CAAqB,KAArB,CAA6BI,CAA7B,CAAqC,WAAtC,CAAD,CAAoDC,IAApD,EAAJ,CAAwE,CACpEjC,CAAC,CAAC,cAAgB4B,CAAhB,CAAqB,KAArB,CAA6BI,CAA7B,CAAqC,gBAAtC,CAAD,CACKH,GADL,CACS,CAAC,iBAAkB,iBAAnB,CAAsC,OAAU,iBAAhD,CADT,CAEH,CACJ,CALD,CAMH,CAXD,EAcA,GAAIK,CAAAA,CAAU,GAAd,CACAlC,CAAC,CAAC,UAAD,CAAD,CAAc6B,GAAd,CAAkB,CAAC,QAAW,MAAZ,CAAlB,EAEA7B,CAAC,CAAC,eAAD,CAAD,CAAmB+B,KAAnB,CAAyB,UAAW,CAChC,GAAI,CAACG,CAAL,CAAiB,CACblC,CAAC,CAAC,UAAD,CAAD,CAAc6B,GAAd,CAAkB,CAAC,QAAW,EAAZ,CAAlB,EACA7B,CAAC,CAAC,cAAD,CAAD,CAAkB6B,GAAlB,CAAsB,CAAC,QAAW,MAAZ,CAAtB,EACAK,CAAU,GACb,CAJD,IAIO,CACHlC,CAAC,CAAC,cAAD,CAAD,CAAkB6B,GAAlB,CAAsB,CAAC,QAAW,EAAZ,CAAtB,EACA7B,CAAC,CAAC,UAAD,CAAD,CAAc6B,GAAd,CAAkB,CAAC,QAAW,MAAZ,CAAlB,EACAK,CAAU,GACb,CACJ,CAVD,EAUGC,QAVH,CAUY,UAAW,CACnBnC,CAAC,CAAC,IAAD,CAAD,CAAQ6B,GAAR,CAAY,CAAC,OAAU,SAAX,CAAZ,CACH,CAZD,CAaH,CAhCA,CAiCJ,CA5DL,CA6DH,CA/EE,CAiFV,CAlFK,CAAN","sourcesContent":["/* Include JQuery */\ndefine(['jquery', 'core/ajax', 'core/notification'], function($, ajax, notification) {\n    return {\n        init: function(envconf) {\n\n            var userId = parseInt(envconf.userid);\n\n            var courseId = envconf.courseid;\n\n            var ajaxPromises = ajax.call([\n                {\n                    methodname: 'block_point_view_get_database',\n                    args: {\n                        userid: userId,\n                        courseid: courseId\n                    },\n                    fail: notification.exception\n                }\n            ]);\n\n            $.when(ajaxPromises[0])\n                .done(function(ajaxResult0) {\n\n                    var moduleIds = [];\n                    ajaxResult0.forEach(function(element) {\n                        moduleIds.push(parseInt(element.cmid));\n                    });\n\n                    var openRow = [];\n\n                    /**\n                     * Hide/Show row details of the table.\n                     *\n                     * @param {array} event\n                     */\n                    function rowDetails(event) {\n                        if (openRow[event.data.id]) {\n                            $('.row_module' + event.data.id + '_details').css({'display': 'none'});\n                            $('.row_module' + event.data.id + ' .c6').html('+');\n                            openRow[event.data.id] = false;\n                        } else {\n                            $('.row_module' + event.data.id + '_details').css({'display': ''});\n                            $('.row_module' + event.data.id + ' .c6').html('-');\n                            openRow[event.data.id] = true;\n                        }\n                    }\n\n                    $(function() {\n                        /* Create an accordeon home made table */\n                        moduleIds.forEach(function(id) {\n                            openRow[id] = false;\n                            $('.row_module' + id + '_details').css({'display': 'none'});\n                            $('.row_module' + id + ' .c6').click({id: id}, rowDetails);\n\n                            [2, 3, 4].forEach(function(index) {\n                                if ($('.row_module' + id + ' .c' + index + ' .voteInt').text() === '0') {\n                                    $('.row_module' + id + ' .c' + index + ' .overview_img')\n                                        .css({'-webkit-filter': 'grayscale(100%)', 'filter': 'grayscale(100%)'});\n                                }\n                            });\n                        });\n\n                        /* Create two views : Integer and Pourcentage, both visible on click */\n                        var intDisplay = false;\n                        $('.voteInt').css({'display': 'none'});\n\n                        $('.c2, .c3, .c4').click(function() {\n                            if (!intDisplay) {\n                                $('.voteInt').css({'display': ''});\n                                $('.votePercent').css({'display': 'none'});\n                                intDisplay = true;\n                            } else {\n                                $('.votePercent').css({'display': ''});\n                                $('.voteInt').css({'display': 'none'});\n                                intDisplay = false;\n                            }\n                        }).mouseout(function() {\n                            $(this).css({'cursor': 'pointer'});\n                        });\n                    });\n                });\n        }\n    };\n});"],"file":"script_menu_point_view.min.js"}