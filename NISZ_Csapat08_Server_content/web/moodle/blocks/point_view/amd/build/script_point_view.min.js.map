{"version":3,"sources":["../src/script_point_view.js"],"names":["define","$","ajax","notification","init","envconf","userId","parseInt","userid","courseId","courseid","contextId","contextid","ajaxPromises","call","methodname","args","fail","exception","when","done","ajaxResult0","ajaxResult1","ajaxResult2","ajaxResult3","ajaxResult4","ajaxResult5","pointViewsSQL","pix","trackcolor","moduleSelect","Reactions","NULL","EASY","BETTER","HARD","reactionArray","reactionVotedArray","totalVoteArray","timerReactionsArray","timerGroupImgArray","forEach","moduleIdParam","moduleId","updateGroupImg","module","easyVote","getElementsByClassName","innerText","betterVote","hardVote","groupImg","groupNb","addClass","css","removeClass","attr","updatePointViewSql","searchModule","assign","resultSearch","element","cmid","toString","groupImgMouseOver","event","stop","animate","top","left","height","data","setTimeout","hide","delay","show","clearTimeout","groupImgMouseOut","mouseOver","widthParam","reactionName","width","translation","leftReaction","nbReation","mouseOut","onClick","isOnMainPage","ids","includes","func","vote","reactionSelect","text","reationSelectName","nbReationSelect","reactionMouseOver","reactionMouseOut","not","mouseover","mouseout","createReactions","document","ajaxComplete","xhr","settings","JSON","parse","length","each","index","find","prepend","pointViewsModule","htmlBlock","easy","easytxt","typeone","better","bettertxt","typetwo","hard","hardtxt","typethree","total","getElementById","querySelectorAll","append","manageReact","uservote","zone","click","className","hardSelector","hardLeft","slice","value","position","difficultyLevel","difficulty","difficultyBlock","id","greentrack","bluetrack","redtrack","blacktrack"],"mappings":"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","sourcesContent":["/* Include JQuery */\ndefine(['jquery', 'core/ajax', 'core/notification'], function($, ajax, notification) {\n    return {\n        init: function(envconf) {\n            /* Wait that the DOM is fully loaded */\n            $(function() {\n                /* ID of the current user */\n                var userId = parseInt(envconf.userid);\n\n                var courseId = envconf.courseid;\n\n                var contextId = envconf.contextid;\n\n                var ajaxPromises = ajax.call([\n                    {\n                        methodname: 'block_point_view_get_database',\n                        args: {\n                            userid: userId,\n                            courseid: courseId\n                        },\n                        fail: notification.exception\n                    },\n                    {\n                        methodname: 'block_point_view_get_pixparam',\n                        args: {\n                            courseid: courseId,\n                            contextid: contextId\n                        },\n                        fail: notification.exception\n                    },\n                    {\n                        methodname: 'block_point_view_get_moduleselect',\n                        args: {\n                            courseid: courseId,\n                        },\n                        fail: notification.exception\n                    },\n                    {\n                        methodname: 'block_point_view_get_difficulty_levels',\n                        args: {\n                            courseid: courseId,\n                        },\n                        fail: notification.exception\n                    },\n                    {\n                        methodname: 'block_point_view_get_track_colors',\n                        args: {},\n                        fail: notification.exception\n                    },\n                    {\n                        methodname: 'block_point_view_get_enrol_list',\n                        args: {\n                            userid: userId,\n                        },\n                        fail: notification.exception\n                    }\n                ]);\n\n                $.when(ajaxPromises[0], ajaxPromises[1], ajaxPromises[2], ajaxPromises[3], ajaxPromises[4], ajaxPromises[5])\n                    .done(function(ajaxResult0, ajaxResult1, ajaxResult2, ajaxResult3, ajaxResult4, ajaxResult5) {\n\n                        /* Array with all the needed data about the reactions of the page */\n                        var pointViewsSQL = ajaxResult0;\n\n                        var pix = ajaxResult1;\n\n                        var difficultylevels = ajaxResult3;\n\n                        var trackcolor = ajaxResult4;\n\n                        var custom = ajaxResult5;\n\n                        /* Array of the modules which have the reactions activated */\n\n                        var moduleSelect = ajaxResult2;\n\n                        /* Enumeration of the possible reactions */\n                        var Reactions = {\n                            NULL: 0,\n                            EASY: 1,\n                            BETTER: 2,\n                            HARD: 3\n                        };\n\n                        /* Array of boolean which determine if the mouse is over or not the reaction zone */\n                        var reactionArray = {};\n                        /*  Array of Reaction of the user for the activity */\n                        var reactionVotedArray = {};\n                        /* Array of total number of reaction for the activity */\n                        var totalVoteArray = {};\n                        /* Array of timer to see how long the mouse stay out of the reaction zone */\n                        var timerReactionsArray = {};\n                        /* Array of timer to see how long the mouse stay over the reaction group image */\n                        var timerGroupImgArray = {};\n\n                        /* Initialisation of the different arrays */\n                        moduleSelect.forEach(function(moduleIdParam) {\n                            var moduleId = parseInt(moduleIdParam);\n                            reactionArray[moduleId] = false;\n                            reactionVotedArray[moduleId] = null;\n                            totalVoteArray[moduleId] = null;\n                            timerReactionsArray[moduleId] = null;\n                            timerGroupImgArray[moduleId] = null;\n                        });\n\n                        /**\n                         * Function which modify the reaction group image in terms of kind of vote\n                         * @param {Object} module\n                         * @param {int} moduleId\n                         */\n                        function updateGroupImg(module, moduleId) {\n\n                            /* Get the number of reaction for each one of it */\n                            var easyVote = parseInt(module.getElementsByClassName('easy_nb')[0].innerText);\n                            var betterVote = parseInt(module.getElementsByClassName('better_nb')[0].innerText);\n                            var hardVote = parseInt(module.getElementsByClassName('hard_nb')[0].innerText);\n                            var groupImg = 'group_';\n\n                            /* Add the image suffix if there is at least 1 vote for the selected reaction */\n                            if (easyVote) {\n                                groupImg += 'E';\n                            }\n                            if (betterVote) {\n                                groupImg += 'B';\n                            }\n                            if (hardVote) {\n                                groupImg += 'H';\n                            }\n\n                            if (reactionVotedArray[moduleId] !== null && reactionVotedArray[moduleId] !== Reactions.NULL) {\n                                var groupNb = $('#module-' + moduleId + ' .group_nb');\n                                groupNb.addClass('voted');\n                                if (totalVoteArray[moduleId] >= 10) {\n                                    groupNb.css({'font-size': '10px'});\n                                }\n                            } else {\n                                $('#module-' + moduleId + ' .group_nb').removeClass('voted');\n                            }\n\n                            /* Modify the image source of the reaction group */\n                            $('#module-' + moduleId + ' .group_img').attr('src', pix[groupImg]);\n                        }\n\n                        /**\n                         * Update PointView SQL\n                         */\n                        function updatePointViewSql() {\n                            var ajaxPromises = ajax.call([\n                                {\n                                    methodname: 'block_point_view_get_database',\n                                    args: {\n                                        userid: userId,\n                                        courseid: courseId\n                                    },\n                                    fail: notification.exception\n                                }\n                            ]);\n\n                            $.when(ajaxPromises[0])\n                                .done(function(ajaxResult0) {\n                                    pointViewsSQL = ajaxResult0;\n                                });\n                        }\n\n                        /**\n                         * Function which returns the data for the moduleId in parameter\n                         * @param {int} moduleId - ID of the module\n                         * @returns {*} - Data for moduleId module\n                         */\n                        function searchModule(moduleId) {\n\n                            /* Boolean which check if the data are in pointViewsSQL array */\n                            var assign = false;\n\n                            /* Variable which will be returned */\n                            var resultSearch;\n                            updatePointViewSql();\n                            pointViewsSQL.forEach(function(element) {\n                                if (parseInt(element.cmid) === moduleId) {\n                                    resultSearch = element;\n                                    assign = true;\n                                }\n                            });\n\n                            /* If the moduleId is not present in the array, there is no vote, so it creates an empty result */\n                            if (!assign) {\n                                resultSearch = {\n                                    'cmid': moduleId.toString(),\n                                    'courseid': courseId,\n                                    'total': '0',\n                                    'typeone': '0',\n                                    'typetwo': '0',\n                                    'typethree': '0',\n                                    'uservote': '0'\n                                };\n                            }\n\n                            return resultSearch;\n                        }\n\n                        /**\n                         * Event when the group image is mouse over\n                         * @param {Object} event\n                         */\n                        function groupImgMouseOver(event) {\n\n                            /* Clear the animation queue to avoid image blinking */\n                            $(this).stop();\n\n                            /* Pointer modification to inform a possible click or interaction */\n                            $(this).css({'cursor': 'pointer'});\n\n                            /* Widen a little to inform that the image is mouse over */\n                            $(this).animate({\n                                top: -1.5,\n                                left: -3,\n                                height: 23\n                            }, 100);\n\n                            /* IF the mouse stay over at least 0.3 seconds */\n                            timerGroupImgArray[event.data.moduleId] = setTimeout(function() {\n\n                                /* Reactions images modifications to black and white if no reaction has been made */\n                                if (parseInt((event.data.module).getElementsByClassName('easy_nb')[0].innerText) === 0) {\n                                    $('#module-' + (event.data.moduleId) + ' .easy')\n                                        .css({'-webkit-filter': 'grayscale(100%)', 'filter': 'grayscale(100%)'});\n                                }\n                                if (parseInt((event.data.module).getElementsByClassName('better_nb')[0].innerText) === 0) {\n                                    $('#module-' + (event.data.moduleId) + ' .better')\n                                        .css({'-webkit-filter': 'grayscale(100%)', 'filter': 'grayscale(100%)'});\n                                    /** ... .attr('src', '../blocks/point_view/pix/better_BW.png'); */\n                                }\n                                if (parseInt((event.data.module).getElementsByClassName('hard_nb')[0].innerText) === 0) {\n                                    $('#module-' + (event.data.moduleId) + ' .hard')\n                                        .css({'-webkit-filter': 'grayscale(100%)', 'filter': 'grayscale(100%)'});\n                                }\n\n                                /*\n                                * Hide the reaction group image with nice animation\n                                * Completely hide the reaction group image to be sure\n                                */\n                                $('#module-' + (event.data.moduleId) + ' .group_img').animate({\n                                    top: '+=15',\n                                    left: '+=35',\n                                    height: 0\n                                }, 300).hide(0);\n\n                                /* Also hide the number of total reaction */\n                                $('#module-' + (event.data.moduleId) + ' .group_nb').delay(50).hide(300);\n\n                                $('#module-' + (event.data.moduleId) + ' .actions').hide(300);\n\n                                /* Enable the pointer events for each reactions images */\n\n                                /* After a short delay, show the 'Easy !' reaction image with nice animation */\n                                $('#module-' + (event.data.moduleId) + ' .easy').delay(50).animate({\n                                    top: -15,\n                                    left: -20,\n                                    height: 20\n                                }, 300)\n                                   .css({'pointer-events': 'auto'});\n\n                                /* Also show the number of 'Easy !' reaction */\n                                $('#module-' + (event.data.moduleId) + ' .easy_nb').delay(50).show(300);\n\n                                /*\n                                 * After a delay, show the 'I'm getting better !' reaction image with nice\n                                * animation\n                                */\n                                $('#module-' + (event.data.moduleId) + ' .better').delay(200).animate({\n                                    top: -15,\n                                    left: 25,\n                                    height: 20\n                                }, 300)\n                                    .css({'pointer-events': 'auto'});\n\n                                /* Also show the number of 'I'm getting better !' reaction */\n                                $('#module-' + (event.data.moduleId) + ' .better_nb').delay(200).show(300);\n\n                                /* After a delay, show the 'So Hard...' reaction image with nice animation */\n                                $('#module-' + (event.data.moduleId) + ' .hard').delay(400).animate({\n                                    top: -15,\n                                    left: 70,\n                                    height: 20\n                                }, 300)\n                                    .css({'pointer-events': 'auto'});\n\n                                /* Also show the number of 'So Hard...' reaction */\n                                $('#module-' + (event.data.moduleId) + ' .hard_nb').delay(400).show(300);\n                            }, 500);\n\n                            /* Reset timerReactions timer */\n                            clearTimeout(timerReactionsArray[event.data.moduleId]);\n\n                            /* IF the mouse stay over at least 3 seconds... */\n                            timerReactionsArray[event.data.moduleId] = setTimeout(function() {\n\n                                /* BUT the mouse is not in the reaction zone */\n                                if (!(reactionArray[event.data.moduleId])) {\n\n                                    /*\n                                    * Disable the pointer events for each reactions images. This is to avoid a\n                                    * bug, because this is possible  select a reaction during the hiding and\n                                    * it create a bad comportment\n                                    */\n\n                                    /*\n                                    * After a short delay, hide the 'So Hard...' reaction image with nice\n                                    * animation\n                                    */\n                                    $('#module-' + (event.data.moduleId) + ' .hard').css({'pointer-events': 'none'})\n                                        .delay(50).animate({\n                                            top: -7.5,\n                                            left: 80,\n                                            height: 0\n                                        }, 500);\n\n                                    /* Also hide the number of 'So Hard...' reaction */\n                                    $('#module-' + (event.data.moduleId) + ' .hard_nb').delay(50).hide(300);\n\n                                    /*\n                                    * After a delay, show the 'I'm getting better !' reaction image with nice\n                                    * animation\n                                    */\n                                    $('#module-' + (event.data.moduleId) + ' .better').css({'pointer-events': 'none'})\n                                        .delay(300).animate({\n                                            top: -7.5,\n                                            left: 35,\n                                            height: 0\n                                        }, 500);\n\n                                    /* Also hide the number of 'I'm getting better !' reaction */\n                                    $('#module-' + (event.data.moduleId) + ' .better_nb').delay(300).hide(300);\n\n                                    /* After a delay, hide the 'Easy !' reaction image with nice animation */\n                                    $('#module-' + (event.data.moduleId) + ' .easy').css({'pointer-events': 'none'})\n                                        .delay(600).animate({\n                                            top: -7.5,\n                                            left: -10,\n                                            height: 0\n                                        }, 500);\n\n                                    /* Also hide the number of 'Easy !' reaction */\n                                    $('#module-' + (event.data.moduleId) + ' .easy_nb').delay(600).hide(300);\n\n                                    updateGroupImg(event.data.module, event.data.moduleId);\n\n                                    /* Show the reaction group image with nice animation */\n                                    $('#module-' + (event.data.moduleId) + ' .group_img').show(0).delay(500).animate({\n                                        top: 0,\n                                        left: 0,\n                                        height: 20\n                                    }, 300);\n\n                                    if (parseInt((event.data.module).getElementsByClassName('group_nb')[0].innerText) !== 0) {\n                                        /* Also show the number of total reaction */\n                                        $('#module-' + (event.data.moduleId) + ' .group_nb').delay(600).show(300);\n                                    }\n\n                                    $('#module-' + (event.data.moduleId) + ' .actions').delay(600).show(300);\n                                }\n                            }, 2000);\n                        }\n\n                        /**\n                         * Event when the group image is mouse out\n                         * @param {Object} event\n                         */\n                        function groupImgMouseOut(event) {\n\n                            /* Clear the animation queue to avoid image blinking */\n                            $(this).stop();\n\n                            /* Reset timerGroupImg timer */\n                            clearTimeout(timerGroupImgArray[event.data.moduleId]);\n\n                            /* IF the mouse out before the reaction group hide */\n                            if ($('#module-' + (event.data.moduleId) + ' .easy').css('height') === '0px') {\n                                /* Come back to the original size to inform that the image is mouse out */\n                                $(this).animate({\n                                    top: 0,\n                                    left: 0,\n                                    height: 20\n                                }, 100);\n                            }\n                        }\n\n                        /**\n                         * Event when the reaction image is mouse over\n                         * @param {Object} event\n                         */\n                        function mouseOver(event) {\n\n                            /* Clear the animation queue to avoid image blinking */\n                            $(this).stop();\n\n                            var widthParam = $('#module-' + event.data.moduleId + ' .' + event.data.reactionName + '_txt').width();\n\n                            var translation = event.data.leftReaction - (widthParam / 2) - 10;\n                            /* Modification of the toolbox position (centered) */\n                            $('#module-' + event.data.moduleId + ' .' + event.data.reactionName + '_txt').css({\n                                '-webkit-transform': 'translateX(' + translation + 'px)',\n                                '-moz-transform': 'translateX(' + translation + 'px)',\n                                '-ms-transform': 'translateX(' + translation + 'px)',\n                                'transform': 'translateX(' + translation + 'px)'\n                            });\n\n                            /* Get the number of 'reactionName' reaction */\n                            var nbReation = parseInt((event.data.module)\n                                .getElementsByClassName(event.data.reactionName + '_nb')[0].innerText);\n\n                            /* To have the bigger image in color if there is no vote */\n                            if (nbReation === 0) {\n                                $('#module-' + event.data.moduleId + ' .' + event.data.reactionName)\n                                    .css({'-webkit-filter': '', 'filter': ''});\n                            }\n\n                            /* Pointer modification to know that we can click or interact */\n                            $(this).css({'cursor': 'pointer'});\n\n                            /* Widen a little to inform that the image is mouse over */\n                            $(this).animate({\n                                top: -25,\n                                left: event.data.leftReaction,\n                                height: 40\n                            }, 100);\n                        }\n\n                        /**\n                         * Event when the reaction image is mouse out\n                         * @param {Object} event\n                         */\n                        function mouseOut(event) {\n\n                            /* Clear the animation queue to avoid image blinking */\n                            $(this).stop();\n\n                            /* Come back to the original size to inform that the image is mouse out */\n                            $(this).animate({\n                                top: -15,\n                                left: event.data.leftReaction,\n                                height: 20\n                            }, 100);\n\n                            /* Get the number of 'reactionName' reaction */\n                            var nbReation = parseInt((event.data.module)\n                                .getElementsByClassName(event.data.reactionName + '_nb')[0].innerText);\n\n                            /* Restore the image in black and white if there is no vote */\n                            if (nbReation === 0) {\n                                $('#module-' + event.data.moduleId + ' .' + event.data.reactionName)\n                                    .css({'-webkit-filter': 'grayscale(100%)', 'filter': 'grayscale(100%)'});\n                            }\n                        }\n\n                        /**\n                         * Event when the reaction image is clicked\n                         * @param {Object} event\n                         */\n                        function onClick(event) {\n                            /* Test if action is on main if true then test if user is enrolled in course */\n                            var isOnMainPage = (courseId !== 1 ? true : (custom.ids).includes(event.data.moduleId.toString(10)));\n                            if (isOnMainPage) {\n                                if (userId !== null && userId !== 1) {\n\n                                    /* Get the number of 'reactionName' reaction */\n                                    var nbReation = parseInt((event.data.module)\n                                        .getElementsByClassName(event.data.reactionName + '_nb')[0].innerText);\n\n                                    /* Get the total number of reaction */\n                                    totalVoteArray[event.data.moduleId] = parseInt((event.data.module)\n                                        .getElementsByClassName('group_nb')[0].innerText);\n\n                                    /* IF there is no 'reactionName' reaction, change the emoji in black and white */\n                                    if (nbReation === 0) {\n                                        $('#module-' + event.data.moduleId + ' .' + event.data.reactionName)\n                                            .css({'-webkit-filter': '', 'filter': ''});\n                                    }\n\n                                    /* IF this is a new vote for the user */\n                                    if (reactionVotedArray[event.data.moduleId] === Reactions.NULL) {\n\n                                        /* AJAX call to the PHP function which add a new line in DB */\n                                        ajax.call([\n                                            {\n                                                methodname: 'block_point_view_update_db',\n                                                args: {\n                                                    func: 'insert',\n                                                    userid: userId,\n                                                    courseid: courseId,\n                                                    cmid: event.data.moduleId,\n                                                    vote: event.data.reactionSelect\n                                                },\n                                                done: function() {\n\n                                                    /* Increment the number of the new reaction of 1 */\n                                                    $('#module-' + event.data.moduleId + ' .' + event.data.reactionName + '_nb')\n                                                        .text(nbReation + 1);\n\n                                                    /* Update the text appearance to know that this is the selected reaction */\n                                                    $('#module-' + event.data.moduleId + ' .' + event.data.reactionName + '_nb')\n                                                        .css({\n                                                        'font-weight': 'bold',\n                                                        'color': '#5585B6'\n                                                    });\n\n                                                    /* Update the value of total number reaction with an increment of 1 */\n                                                    (event.data.module).getElementsByClassName('group_nb')[0].innerText =\n                                                        (totalVoteArray[event.data.moduleId] + 1);\n\n                                                    /* Update the current reation with the new one */\n                                                    reactionVotedArray[event.data.moduleId] = event.data.reactionSelect;\n                                                },\n                                                fail: notification.exception\n                                            }\n                                        ]);\n                                    } else if (reactionVotedArray[event.data.moduleId] === event.data.reactionSelect) {\n                                        /* IF the user canceled its vote */\n\n                                        /* AJAX call to the PHP function which remove a line in DB */\n                                        ajax.call([\n                                            {\n                                                methodname: 'block_point_view_update_db',\n                                                args: {\n                                                    func: 'remove',\n                                                    userid: userId,\n                                                    courseid: courseId,\n                                                    cmid: event.data.moduleId,\n                                                    vote: event.data.reactionSelect\n                                                },\n                                                done: function() {\n\n                                                    /* Decrement the number of old of 1 */\n                                                    nbReation--;\n\n                                                    /* Update the number of old reaction */\n                                                    $('#module-' + event.data.moduleId + ' .' + event.data.reactionName + '_nb')\n                                                        .text(nbReation);\n\n                                                    /**\n                                                    * Update the text appearance to know that this is no longer\n                                                    * the selected reaction\n                                                    */\n                                                    $('#module-' + event.data.moduleId + ' .' + event.data.reactionName + '_nb')\n                                                        .css({\n                                                        'font-weight': 'normal',\n                                                        'color': 'black'\n                                                    });\n\n                                                    /*\n                                                        * IF after the decrementation, the number of old reaction is 0\n                                                        * THEN change the emoji in black and white\n                                                        */\n                                                    if (nbReation === 0) {\n                                                        $('#module-' + event.data.moduleId + ' .' + event.data.reactionName)\n                                                            .css({\n                                                                '-webkit-filter': 'grayscale(100%)',\n                                                                'filter': 'grayscale(100%)'\n                                                            });\n                                                    }\n\n                                                    /* Update the value of total number reaction with an decrement of 1 */\n                                                    (event.data.module).getElementsByClassName('group_nb')[0].innerText =\n                                                        (totalVoteArray[event.data.moduleId] - 1);\n\n                                                    /* Update the current reaction with 'none reaction' */\n                                                    reactionVotedArray[event.data.moduleId] = Reactions.NULL;\n                                                },\n                                                fail: notification.exception\n                                            }\n                                        ]);\n                                    } else {\n                                        /* IF the user update its vote */\n\n                                        /* AJAX call to the PHP function which update a line in DB */\n                                        ajax.call([\n                                            {\n                                                methodname: 'block_point_view_update_db',\n                                                args: {\n                                                    func: 'update',\n                                                    userid: userId,\n                                                    courseid: courseId,\n                                                    cmid: event.data.moduleId,\n                                                    vote: event.data.reactionSelect\n                                                },\n                                                done: function() {\n\n                                                    /* Increment the number of 'reactionName' reaction of 1 */\n                                                    $('#module-' + event.data.moduleId + ' .' + event.data.reactionName + '_nb')\n                                                        .text(nbReation + 1);\n\n                                                    /* Update the text appearance to know that this is the selected reaction */\n                                                    $('#module-' + (event.data.moduleId) + ' .' + (event.data.reactionName) + '_nb')\n                                                        .css({\n                                                        'font-weight': 'bold',\n                                                        'color': '#5585B6'\n                                                    });\n\n                                                    /* Find the name of the reaction selected */\n                                                    var reationSelectName;\n                                                    switch (reactionVotedArray[event.data.moduleId]) {\n                                                        case Reactions.EASY:\n                                                            reationSelectName = 'easy';\n                                                            break;\n                                                        case Reactions.BETTER:\n                                                            reationSelectName = 'better';\n                                                            break;\n                                                        case Reactions.HARD:\n                                                            reationSelectName = 'hard';\n                                                            break;\n                                                    }\n\n                                                    /*  Get the current number of the old reaction and decrement it of 1 */\n                                                    var nbReationSelect = parseInt((event.data.module)\n                                                        .getElementsByClassName(reationSelectName + '_nb')[0].innerText) - 1;\n\n                                                    /* Update the value of the old reaction */\n                                                    $('#module-' + event.data.moduleId + ' .' + reationSelectName + '_nb')\n                                                        .text(nbReationSelect);\n\n                                                    /** Update the text appearance to know that this is no longer\n                                                     * the selected reaction\n                                                     */\n                                                    $('#module-' + (event.data.moduleId) + ' .' + reationSelectName + '_nb')\n                                                        .css({\n                                                        'font-weight': 'normal',\n                                                        'color': 'black'\n                                                    });\n\n                                                    /*\n                                                    * IF after the decrementation, the number of the old\n                                                    * reaction is 0 THEN change the emoji in black and white\n                                                    */\n                                                    if (nbReationSelect === 0) {\n                                                        $('#module-' + (event.data.moduleId) + ' .' + reationSelectName)\n                                                            .css({\n                                                                '-webkit-filter': 'grayscale(100%)',\n                                                                'filter': 'grayscale(100%)'\n                                                            });\n                                                    }\n\n                                                    /* Update the current reation with the new one */\n                                                    reactionVotedArray[event.data.moduleId] = event.data.reactionSelect;\n                                                },\n                                                fail: notification.exception\n                                            }\n                                        ]);\n                                    }\n                                }\n                            } else {\n                                /** FIXME alert(\"You are not enrolled in this course, you can't react to this.\"); */\n                            }\n                        }\n\n                        /**\n                         * Event when the reaction zone is mouse over\n                         * @param {Object} event\n                         */\n                        function reactionMouseOver(event) {\n\n                            /* The mouse is over the reaction zone */\n                            reactionArray[event.data.moduleId] = true;\n                        }\n\n                        /**\n                         * Event when the reaction zone is mouse out\n                         * @param {Object} event\n                         */\n                        function reactionMouseOut(event) {\n\n                            /* The mouse is out the reaction zone */\n                            reactionArray[event.data.moduleId] = false;\n\n                            /* Reset timerReactions timer */\n                            clearTimeout(timerReactionsArray[event.data.moduleId]);\n\n                            /* IF the mouse stay over at least 3 seconds... */\n                            timerReactionsArray[event.data.moduleId] = setTimeout(function() {\n\n                                /* BUT that the mouse is note in the reaction zone */\n                                if (!(reactionArray[event.data.moduleId])) {\n\n                                    /*\n                                    * Disable the pointer events for each reactions images. This is to avoid a\n                                    * bug, because this is possible  select a reaction during the hiding and\n                                    * it create a bad comportment\n                                    */\n\n                                    /*\n                                    * After a short delay, hide the 'So Hard...' reaction image with nice\n                                    * animation\n                                    */\n\n                                    $('#module-' + (event.data.moduleId) + ' .hard').css({'pointer-events': 'none'})\n                                        .delay(50).animate({\n                                            top: -7.5,\n                                            left: 80,\n                                            height: 0\n                                        }, 500);\n\n                                    /* Also hide the number of 'So Hard...' reaction */\n                                    $('#module-' + (event.data.moduleId) + ' .hard_nb').delay(50).hide(300);\n\n                                    /*\n                                    * After a delay, show the 'I'm getting better !' reaction image with nice\n                                    * animation\n                                    */\n                                    $('#module-' + (event.data.moduleId) + ' .better').css({'pointer-events': 'none'})\n                                        .delay(300).animate({\n                                            top: -7.5,\n                                            left: 35,\n                                            height: 0\n                                        }, 500);\n\n                                    /* Also hide the number of 'I'm getting better !' reaction */\n                                    $('#module-' + (event.data.moduleId) + ' .better_nb').delay(300).hide(300);\n\n                                    /* After a delay, hide the 'Easy !' reaction image with nice animation */\n                                    $('#module-' + (event.data.moduleId) + ' .easy').css({'pointer-events': 'none'})\n                                        .delay(600).animate({\n                                            top: -7.5,\n                                            left: -10,\n                                            height: 0\n                                        }, 500);\n\n                                    /* Also hide the number of 'Easy !' reaction */\n                                    $('#module-' + (event.data.moduleId) + ' .easy_nb').delay(600).hide(300);\n\n                                    updateGroupImg(event.data.module, event.data.moduleId);\n\n                                    /* Show the reaction group image with nice animation */\n                                    $('#module-' + (event.data.moduleId) + ' .group_img').delay(500).show(0).animate({\n                                        top: 0,\n                                        left: 0,\n                                        height: 20\n                                    }, 300);\n\n                                    if (parseInt((event.data.module).getElementsByClassName('group_nb')[0].innerText) !== 0) {\n                                        /* Also show the number of total reaction */\n                                        $('#module-' + (event.data.moduleId) + ' .group_nb').delay(600).show(300);\n                                    }\n\n                                    $('#module-' + (event.data.moduleId) + ' .actions').delay(600).show(300);\n                                }\n                            }, 1000);\n                        }\n\n                        $('.activity').not('.label')\n                            .mouseover(function() {\n                                $(this).css({\n                                    'background': 'linear-gradient(to right, #f4f4f4, #f4f4f4, white)',\n                                    'border-radius': '5px'\n                                });\n                            })\n                            .mouseout(function() {\n                                $(this).css({'background': ''});\n                            });\n\n                        createReactions();\n\n                        $(document).ajaxComplete(function(event, xhr, settings) {\n                            if (settings.data !== undefined) {\n                                var data = JSON.parse(settings.data);\n                                if (data.length > 0 && data[0].methodname !== undefined) {\n                                    var methodname = data[0].methodname;\n                                    if (\n                                        methodname === 'format_tiles_get_single_section_page_html'\n                                        || methodname === 'format_tiles_log_tile_click'\n                                    ) {\n                                        createReactions();\n                                    }\n                                }\n                            }\n                        });\n\n                        /**\n                         * Create reaction\n                         */\n                        function createReactions() {\n                            /* Resize the activity name field to give space to Likes icons */\n                            $('.mod-indent-outer').css({'width': '85%'});\n\n                            /* Folder friendly */\n                            $('.folder .mod-indent-outer').each(function(index, element) {\n                                if (!$(element).find(\".activityinstance\").length > 0) {\n                                    $(element).prepend('<div class=\"activityinstance\" style=\"width: 0;\"><a></a></div>');\n                                }\n                            });\n\n                            /* For each selected module, create a reaction zone */\n                            moduleSelect.forEach(function(moduleIdParam) {\n                                var moduleId = parseInt(moduleIdParam);\n                                var pointViewsModule = searchModule(moduleId);\n\n                                /* Create the HTML block necessary to each activity */\n                                var htmlBlock = '<div class=\"block_point_view block_point_view_container\"><div class=\"reactions\">' +\n                                    '<!-- EASY ! --><span class=\"tooltipreaction\">' +\n                                    '<img src=\"' + pix.easy + '\" alt=\" \" class=\"easy\"/>' +\n                                    '<span class=\"tooltiptextreaction easy_txt\">' + pix.easytxt + '</span></span>' +\n                                    '<span class=\"easy_nb\">' + pointViewsModule.typeone + '</span>' +\n                                    '<!-- I\\'M GETTING BETTER --><span class=\"tooltipreaction\">' +\n                                    '<img src=\"' + pix.better + '\" alt=\" \" class=\"better\"/>' +\n                                    '<span class=\"tooltiptextreaction better_txt\">' + pix.bettertxt + '</span></span>' +\n                                    '<span class=\"better_nb\">' + pointViewsModule.typetwo + '</span>' +\n                                    '<!-- SO HARD... --><span class=\"tooltipreaction\">' +\n                                    '<img src=\"' + pix.hard + '\" alt=\" \" class=\"hard\"/>' +\n                                    '<span class=\"tooltiptextreaction hard_txt\">' + pix.hardtxt + '</span></span>' +\n                                    '<span class=\"hard_nb\">' + pointViewsModule.typethree + '</span></div>' +\n                                    '<!-- GROUP --><div class=\"group\">' +\n                                    '<img src=\"\" alt=\" \" class=\"group_img\"/>' +\n                                    '<span class=\"group_nb\">' + pointViewsModule.total + '</span></div></div>';\n\n                                if (\n                                    (document.getElementById('module-' + moduleId) !== null)\n                                    && document.querySelectorAll('#module-' + moduleId + ' .block_point_view_container')\n                                        .length === 0\n                                ) {\n                                    $('#module-' + moduleId + ' .activityinstance').append(htmlBlock);\n                                    manageReact(moduleId, '#module-');\n                                }\n\n                                /* Initialise reactionVotedArray and CSS */\n                                switch (parseInt(pointViewsModule.uservote)) {\n                                    case 1:\n                                        reactionVotedArray[moduleId] = Reactions.EASY;\n                                        /* Update the text appearance to know that this is the selected reaction */\n                                        $('#module-' + moduleId + ' .easy_nb').css({\n                                            'font-weight': 'bold',\n                                            'color': '#5585B6'\n                                        });\n                                        break;\n                                    case 2:\n                                        reactionVotedArray[moduleId] = Reactions.BETTER;\n                                        /* Update the text appearance to know that this is the selected reaction */\n                                        $('#module-' + moduleId + ' .better_nb').css({\n                                            'font-weight': 'bold',\n                                            'color': '#5585B6'\n                                        });\n                                        break;\n                                    case 3:\n                                        reactionVotedArray[moduleId] = Reactions.HARD;\n                                        /* Update the text appearance to know that this is the selected reaction */\n                                        $('#module-' + moduleId + ' .hard_nb').css({\n                                            'font-weight': 'bold',\n                                            'color': '#5585B6'\n                                        });\n                                        break;\n                                    default:\n                                        reactionVotedArray[moduleId] = Reactions.NULL;\n                                        break;\n                                }\n\n                                var module = document.getElementById('module-' + moduleId);\n                                if (module !== null) {\n                                    updateGroupImg(module, moduleId);\n                                }\n                            });\n                        }\n\n                        /**\n                         * @param {string} moduleIdParam\n                         * @param {string} zone\n                         */\n                        function manageReact(moduleIdParam, zone) {\n                            var moduleId = parseInt(moduleIdParam);\n                            /* Shortcut to select the 'module-' + moduleId ID in the page */\n                            var module = document.getElementById('module-' + moduleId);\n\n                            if (module !== null) {\n                                if (parseInt(module.getElementsByClassName('group_nb')[0].innerText) === 0) {\n                                    /* Also show the number of total reaction */\n                                    $(zone + moduleId + ' .group_nb').hide();\n                                }\n\n                                updateGroupImg(module, moduleId);\n\n                                /* Management of the reaction group */\n                                $(zone + moduleId + ' .group_img')\n                                    /* MOUSE OVER */\n                                    .mouseover({module: module, moduleId: moduleId}, groupImgMouseOver)\n                                    /* ON CLICK */\n                                    .click({module: module, moduleId: moduleId}, groupImgMouseOver)\n                                    /* MOUSE OUT */\n                                    .mouseout({moduleId: moduleId}, groupImgMouseOut)\n                                ;\n\n                                /* Management of the 'Easy !' reaction */\n                                $(zone + moduleId + ' .easy')\n                                    /* MOUSE OVER */\n                                    .mouseover({\n                                        module: module, moduleId: moduleId, reactionName: 'easy',\n                                        className: 'easy_txt', leftReaction: -30\n                                    }, mouseOver)\n                                    /* MOUSE OUT */\n                                    .mouseout({\n                                        module: module, moduleId: moduleId, leftReaction: -20,\n                                        reactionName: 'easy'\n                                    }, mouseOut)\n                                    /* ON CLICK */\n                                    .click({\n                                        module: module, moduleId: moduleId, reactionName: 'easy',\n                                        reactionSelect: Reactions.EASY\n                                    }, onClick)\n                                ;\n\n                                /* Management of the 'I'm getting better !' reaction */\n                                $(zone + moduleId + ' .better')\n                                    /* MOUSE OVER */\n                                    .mouseover({\n                                        module: module, moduleId: moduleId, reactionName: 'better',\n                                        className: 'better_txt', leftReaction: 15\n                                    }, mouseOver)\n                                    /* MOUSE OUT */\n                                    .mouseout({\n                                        module: module, moduleId: moduleId, leftReaction: 25,\n                                        reactionName: 'better'\n                                    }, mouseOut)\n                                    /* ON CLICK */\n                                    .click({\n                                        module: module, moduleId: moduleId, reactionName: 'better',\n                                        reactionSelect: Reactions.BETTER\n                                    }, onClick)\n                                ;\n\n                                var hardSelector = $(zone + moduleId + ' .hard');\n                                var hardLeft = parseInt((hardSelector.css('left')).slice(0, -2), 10);\n\n                                /* Management of the 'So hard...' reaction */\n                                hardSelector\n                                    /* MOUSE OVER */\n                                    .mouseover({\n                                        module: module, moduleId: moduleId, reactionName: 'hard',\n                                        className: 'hard_txt', leftReaction: (hardLeft - 20)\n                                    }, mouseOver)\n                                    /* MOUSE OUT */\n                                    .mouseout({\n                                        module: module, moduleId: moduleId, leftReaction: (hardLeft - 10),\n                                        reactionName: 'hard'\n                                    }, mouseOut)\n                                    /* ON CLICK */\n                                    .click({\n                                        module: module, moduleId: moduleId, reactionName: 'hard',\n                                        reactionSelect: Reactions.HARD\n                                    }, onClick)\n                                ;\n\n                                /* Management of the reaction zone */\n                                $(zone + moduleId + ' .reactions')\n                                    /* MOUSE OVER */\n                                    .mouseover({moduleId: moduleId}, reactionMouseOver)\n                                    /* MOUSE OUT */\n                                    .mouseout({module: module, moduleId: moduleId}, reactionMouseOut)\n                                ;\n                            }\n                        }\n\n                        /* Display difficulty tracks */\n                        difficultylevels.forEach(function(value) {\n                            var position = (courseId === 1 ? \" .difficulty_box\" : \" .activityinstance a\");\n                            if (value.difficultyLevel !== '0') {\n                                var difficulty;\n                                switch (parseInt(value.difficultyLevel)) {\n                                    case 1:\n                                        difficulty = 'green';\n                                        break;\n                                    case 2:\n                                        difficulty = 'blue';\n                                        break;\n                                    case 3:\n                                        difficulty = 'red';\n                                        break;\n                                    case 4:\n                                        difficulty = 'black';\n                                        break;\n                                }\n\n                                var difficultyBlock = '<div class=\"block_point_view track ' + difficulty + 'track\"></div>';\n\n                                $('#module-' + value.id + position).prepend(difficultyBlock);\n                            } else {\n                                var difficultyBlockEmpty = '<span class=\"block_point_view track\"></span>';\n                                $('#module-' + value.id + position).prepend(difficultyBlockEmpty);\n                            }\n                        });\n\n                        /* Dont' hide tooltip when reaction are in the top of course*/\n                        $('#region-main > .card').css({'overflow-x': 'unset'});\n\n                        /* Set the colors of difficulty tracks */\n                        $('.greentrack').css({'background-color': trackcolor.greentrack});\n                        $('.bluetrack').css({'background-color': trackcolor.bluetrack});\n                        $('.redtrack').css({'background-color': trackcolor.redtrack});\n                        $('.blacktrack').css({'background-color': trackcolor.blacktrack});\n\n                        /* Add animation to menu button */\n                        $('.block_point_view #menu_point_view_img')\n                            .mouseover(function() {\n                                $(this).css({\n                                    '-webkit-filter': 'invert(100%)',\n                                    '-moz-filter': 'invert(100%)',\n                                    '-o-filter': 'invert(100%)',\n                                    '-ms-filter': 'invert(100%)'\n                                });\n                            })\n                            .mouseout(function() {\n                                $(this).css({\n                                    '-webkit-filter': 'invert(0%)',\n                                    '-moz-filter': 'invert(0%)',\n                                    '-o-filter': 'invert(0%)',\n                                    '-ms-filter': 'invert(0%)'\n                                });\n                            });\n                    });\n            });\n        }\n    };\n});"],"file":"script_point_view.min.js"}